(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(14),a=n.n(r),u=(n(19),n(3)),s=n(0),o=function(e){var t=e.searchHandle;return Object(s.jsxs)(s.Fragment,{children:["filter show with ",Object(s.jsx)("input",{type:"text",onChange:t})]})},i=function(e){var t=e.message,n=Object(c.useState)(!0),r=Object(u.a)(n,2),a=r[0],o=r[1];return Object(c.useEffect)((function(){if(null===t[0]||""===t[0])return null;o(!0);var e=setTimeout((function(){o(!1)}),5e3);return function(){clearTimeout(e)}}),[t]),a?Object(s.jsx)("div",{className:t[1],children:t[0]}):null},j=function(e){var t=e.submitHandle,n=e.nameChange,c=e.numberChange;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h3",{children:"add a new"}),Object(s.jsxs)("form",{onSubmit:t,children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{type:"text",onChange:n})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{type:"text",onChange:c})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{children:"add"})})]})]})},b=n(4),d=n.n(b),h="http://localhost:3001/api/persons",l=function(e){var t=e.person;return Object(s.jsx)("div",{children:Object(s.jsxs)("p",{children:[t.name," ",t.number," ",Object(s.jsx)("button",{onClick:function(){var e;window.confirm("Delete ".concat(t.name))&&(e=t.id,d.a.delete("".concat(h,"/").concat(e)))},children:"delete"})]})})},m=function(e){var t=e.persons;return Object(s.jsx)(s.Fragment,{children:t.map((function(e){return Object(s.jsx)("div",{children:Object(s.jsx)(l,{person:e})},e.name)}))})},f=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),b=Object(u.a)(a,2),l=b[0],f=b[1],O=Object(c.useState)(""),x=Object(u.a)(O,2),p=x[0],v=x[1],g=Object(c.useState)(""),C=Object(u.a)(g,2),w=C[0],k=C[1],S=Object(c.useState)([]),y=Object(u.a)(S,2),E=y[0],H=y[1];Object(c.useEffect)((function(){d.a.get(h).then((function(e){var t=e.data;return r(t)}))}),[n]);var F=[];return n.length>0&&(F=n.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())}))),Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(i,{message:E}),Object(s.jsx)(o,{searchHandle:function(e){k(e.target.value)}}),Object(s.jsx)(j,{submitHandle:function(e){e.preventDefault();var t,c=n.filter((function(e){return e.name===l}));if(c.length>0&&c[0].number===p)return alert("".concat(l," is already added to fonebook"));c.length>0&&c[0].number!==p?(t={id:c[0].id,name:l,number:p},d.a.put("".concat(h,"/").concat(t.id),t).then((function(e){return["Edited ".concat(e.data.name),"success"]})).catch((function(e){return["".concat(e.response.data.message),"error"]}))).then((function(e){H(e)})):function(e){var t=e.name,n=e.number;return d.a.post(h,{name:t,number:n}).then((function(e){return["Created ".concat([e.data.name,e.data.number]),"success"]})).catch((function(e){return["".concat(e.response.data.message),"error"]}))}({name:l,number:p}).then((function(e){H([e[0],e[1]])})).catch((function(e){H(["Edited ".concat(e.name),"error"])}))},nameChange:function(e){f(e.target.value)},numberChange:function(e){v(e.target.value)}}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(m,{persons:F})]})};a.a.render(Object(s.jsx)(f,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.9cde84ab.chunk.js.map